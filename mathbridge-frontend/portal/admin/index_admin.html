<!-- /index.html -->
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MathBridge Admin – Scarlet Bridge (Light Minimal)</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>

    <!-- Lucide, Chart.js, day.js -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>

    <!-- App stylesheet -->
    <base href="../">
    <link rel="stylesheet" href="assets/css/admin.css" />
</head>
<body>
<div class="app">
    <!-- Header -->
    <header class="app-header" role="banner">
        <div class="left">
            <button class="icon-btn" id="sidebarToggle" aria-label="Thu gọn/Mở rộng sidebar" title="Thu gọn/Mở rộng sidebar">
                <i data-lucide="panel-left-close" aria-hidden="true"></i>
            </button>

            <a class="brand" href="#" aria-label="MathBridge Admin">
                <i data-lucide="bridge" class="brand-icon" aria-hidden="true"></i>
                <span class="brand-text">MathBridge Admin</span>
            </a>
        </div>

        <div class="center">
            <form class="search" role="search" aria-label="Tìm kiếm nhanh">
                <i data-lucide="search" aria-hidden="true"></i>
                <input id="globalSearch" type="search" placeholder="Tìm học viên, gia sư, hợp đồng…" aria-label="Ô tìm kiếm" autocomplete="off"/>
            </form>
        </div>

        <div class="right">
            <button class="btn brand" id="quickAddBtn" aria-haspopup="dialog" aria-controls="quickAddModal">
                <i data-lucide="plus" aria-hidden="true"></i>
                <span class="hide-sm">Thêm nhanh</span>
            </button>

            <div class="notif-wrapper">
                <button class="icon-btn" id="notifBtn" aria-haspopup="true" aria-expanded="false" aria-controls="notifPopover" aria-label="Thông báo" title="Thông báo">
                    <i data-lucide="bell" aria-hidden="true"></i>
                    <span class="badge" id="notifBadge">3</span>
                </button>

                <div class="popover" id="notifPopover" role="dialog" aria-modal="false" aria-label="Thông báo mới">
                    <div class="popover-header">
                        <strong>Thông báo</strong>
                        <button class="icon-btn sm" id="notifClose" aria-label="Đóng thông báo"><i data-lucide="x"></i></button>
                    </div>
                    <ul class="notif-list" id="notifList"></ul>
                    <div class="popover-footer"><a href="#" class="link">Xem tất cả</a></div>
                </div>
            </div>

            <div class="profile">
                <button class="profile-btn" id="profileBtn" aria-haspopup="true" aria-expanded="false">
                    <img class="avatar" src="https://i.pravatar.cc/40?img=13" alt="Avatar người dùng" />
                    <span class="hide-sm">Admin</span>
                    <i data-lucide="chevron-down" aria-hidden="true"></i>
                </button>
                <div class="menu" id="profileMenu" role="menu" aria-label="Menu hồ sơ">
                    <a href="#" role="menuitem"><i data-lucide="user"></i>Hồ sơ</a>
                    <a href="#" role="menuitem"><i data-lucide="settings"></i>Cài đặt</a>
                    <hr />
                    <a href="#" role="menuitem"><i data-lucide="log-out"></i>Đăng xuất</a>
                </div>
            </div>
        </div>
    </header>

    <div class="shell">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar" aria-label="Điều hướng chính">
            <nav class="nav">
                <!-- MỤC BẠN YÊU CẦU -->
                <a class="nav-item active" href="#" data-key="dashboard" title="Dashboard">
                    <i data-lucide="layout-dashboard"></i><span>Dashboard</span>
                </a>
                <a class="nav-item" href="#" data-key="lecturers" title="Giảng Viên">
                    <i data-lucide="graduation-cap"></i><span>Giảng Viên</span>
                </a>
                <a class="nav-item" href="#" data-key="classes" title="Lớp Học">
                    <i data-lucide="layers"></i><span>Lớp Học</span>
                </a>
                <a class="nav-item" href="#" data-key="contracts" title="Hợp đồng">
                    <i data-lucide="file-text"></i><span>Hợp đồng</span>
                </a>
                <a class="nav-item" href="#" data-key="revenue" title="Doanh thu">
                    <i data-lucide="badge-dollar-sign"></i><span>Doanh thu</span>
                </a>
                <a class="nav-item" href="#" data-key="curriculums" title="Chương Trình Học">
                    <i data-lucide="book-open-text"></i><span>Chương Trình Học</span>
                </a>

                <!-- GỢI Ý THÊM CHO ADMIN -->
                <div class="nav-sep" role="separator" aria-hidden="true"></div>
                <a class="nav-item" href="#" data-key="students" title="Học viên">
                    <i data-lucide="users"></i><span>Học viên</span>
                </a>
                <a class="nav-item" href="#" data-key="parents" title="Phụ huynh">
                    <i data-lucide="contact"></i><span>Phụ huynh</span>
                </a>
                <a class="nav-item" href="#" data-key="campus" title="Cơ sở &amp; Phòng học">
                    <i data-lucide="building-2"></i><span>Cơ sở &amp; Phòng học</span>
                </a>
                <a class="nav-item" href="#" data-key="rbac" title="Quyền &amp; Tài khoản">
                    <i data-lucide="shield-check"></i><span>Quyền &amp; Tài khoản</span>
                </a>
                <a class="nav-item" href="#" data-key="settings" title="Cài đặt">
                    <i data-lucide="sliders-horizontal"></i><span>Cài đặt</span>
                </a>
                <a class="nav-item" href="#" data-key="audit" title="Lịch sử / Audit Logs">
                    <i data-lucide="clock-9"></i><span>Lịch sử / Audit Logs</span>
                </a>
            </nav>
        </aside>

        <!-- Main -->
        <main class="main" id="main" role="main">
            <!-- Toolbar bộ lọc -->
            <section class="filters" id="filtersToolbar" aria-label="Bộ lọc">
                <div class="filters-row">
                    <div class="form-field">
                        <label for="gradeSelect">Lớp</label>
                        <select id="gradeSelect" aria-label="Chọn lớp">
                            <option value="all">Tất cả</option>
                            <option value="9">Lớp 9</option>
                            <option value="10">Lớp 10</option>
                            <option value="11">Lớp 11</option>
                            <option value="12">Lớp 12</option>
                        </select>
                    </div>

                    <div class="form-field">
                        <label for="goalSelect">Mục tiêu thi chứng chỉ</label>
                        <select id="goalSelect" aria-label="Chọn mục tiêu chứng chỉ">
                            <option value="all">Tất cả</option>
                            <option value="IGCSE">IGCSE</option>
                            <option value="A-Level">A-Level</option>
                            <option value="IB">IB</option>
                            <option value="AP">AP</option>
                            <option value="SAT">SAT</option>
                        </select>
                    </div>

                    <div class="form-field">
                        <label for="campusSelect">Cơ sở</label>
                        <select id="campusSelect" aria-label="Chọn cơ sở">
                            <option value="all">Tất cả</option>
                            <option value="1">Cơ sở 1</option>
                            <option value="2">Cơ sở 2</option>
                        </select>
                    </div>

                    <div class="form-field date">
                        <label for="dateFrom">Từ ngày</label>
                        <input id="dateFrom" type="date" aria-label="Từ ngày" />
                    </div>
                    <div class="form-field date">
                        <label for="dateTo">Đến ngày</label>
                        <input id="dateTo" type="date" aria-label="Đến ngày" />
                    </div>

                    <div class="filters-actions">
                        <button id="applyBtn" class="btn brand" aria-label="Áp dụng bộ lọc">
                            <i data-lucide="filter"></i><span>Áp dụng</span>
                        </button>
                        <button id="clearBtn" class="btn ghost" aria-label="Xoá bộ lọc">
                            <i data-lucide="x-circle"></i><span>Xoá lọc</span>
                        </button>
                    </div>

                    <button class="btn outline show-drawer" id="openDrawer" aria-controls="filtersDrawer" aria-haspopup="true">
                        <i data-lucide="filter"></i><span>Bộ lọc</span>
                    </button>
                </div>
            </section>

            <!-- KPI Cards -->
            <section class="kpi-grid" aria-label="Chỉ số tổng quan">
                <article class="card kpi" title="Số học viên đang hoạt động">
                    <div class="kpi-head">
                        <div class="kpi-icon"><i data-lucide="users"></i></div>
                        <span class="kpi-label">Active Students</span>
                    </div>
                    <div class="kpi-main">
                        <div class="kpi-value" id="kpiStudents">—</div>
                        <span class="chip delta positive" id="kpiStudentsDelta">
              <i data-lucide="arrow-up-right"></i><span>+4.2% so tháng trước</span>
            </span>
                    </div>
                    <div class="sparkline"></div>
                </article>

                <article class="card kpi" title="Tỉ lệ điểm danh tuần">
                    <div class="kpi-head">
                        <div class="kpi-icon"><i data-lucide="calendar-check-2"></i></div>
                        <span class="kpi-label">Tỉ lệ điểm danh tuần</span>
                    </div>
                    <div class="kpi-main">
                        <div class="kpi-value" id="kpiAttendance">—</div>
                        <span class="chip delta neutral" id="kpiAttendanceDelta">
              <i data-lucide="minus"></i><span>-0.3% vs tuần trước</span>
            </span>
                    </div>
                    <div class="sparkline"></div>
                </article>

                <article class="card kpi" title="Hóa đơn quá hạn">
                    <div class="kpi-head">
                        <div class="kpi-icon"><i data-lucide="alert-triangle"></i></div>
                        <span class="kpi-label">Hóa đơn quá hạn</span>
                    </div>
                    <div class="kpi-main">
                        <div class="kpi-value" id="kpiOverdue">—</div>
                        <span class="chip delta negative" id="kpiOverdueDelta">
              <i data-lucide="arrow-up-right"></i><span>+1.1% so tháng trước</span>
            </span>
                    </div>
                    <div class="sparkline"></div>
                </article>

                <article class="card kpi" title="Doanh thu tháng">
                    <div class="kpi-head">
                        <div class="kpi-icon"><i data-lucide="dollar-sign"></i></div>
                        <span class="kpi-label">Doanh thu tháng</span>
                    </div>
                    <div class="kpi-main">
                        <div class="kpi-value" id="kpiRevenue">—</div>
                        <span class="chip delta positive" id="kpiRevenueDelta">
              <i data-lucide="arrow-up-right"></i><span>+6.5% so tháng trước</span>
            </span>
                    </div>
                    <div class="sparkline"></div>
                </article>
            </section>

            <!-- Charts -->
            <section class="grid-2">
                <article class="card" id="revenueCard" aria-label="Biểu đồ doanh thu theo tháng">
                    <div class="card-head">
                        <h3>Doanh thu theo tháng</h3>
                        <div class="card-actions">
                            <button class="icon-btn sm" title="Tải xuống" aria-label="Tải xuống"><i data-lucide="download"></i></button>
                        </div>
                    </div>
                    <div class="skeleton-wrap"><div class="skeleton"></div></div>
                    <div class="card-body">
                        <canvas id="revenueChart" height="120" aria-label="Doanh thu theo tháng" role="img"></canvas>
                    </div>
                </article>

                <article class="card" id="enrollCard" aria-label="Ghi danh theo Chương trình">
                    <div class="card-head">
                        <h3>Ghi danh theo Chương trình</h3>
                        <div class="hint">Stacked (IGCSE / A-Level / IB / AP / SAT)</div>
                    </div>
                    <div class="skeleton-wrap"><div class="skeleton"></div></div>
                    <div class="card-body">
                        <canvas id="enrollChart" height="120" aria-label="Ghi danh theo chương trình" role="img"></canvas>
                    </div>
                </article>
            </section>

            <!-- Table -->
            <section class="card" id="invoiceCard" aria-label="Bảng Hóa đơn quá hạn">
                <div class="card-head">
                    <h3>Hóa đơn quá hạn</h3>
                    <div class="card-actions">
                        <label class="switch" title="Chế độ hiển thị bảng">
                            <input type="checkbox" id="densityToggle" aria-label="Chuyển chế độ density comfy/compact" />
                            <span>Compact</span>
                        </label>
                    </div>
                </div>

                <div class="skeleton-wrap"><div class="skeleton"></div></div>

                <div class="table-wrap">
                    <table class="table" id="invoiceTable">
                        <thead>
                        <tr>
                            <th>Tên</th>
                            <th>Liên quan</th>
                            <th>Trạng thái</th>
                            <th>Deadline</th>
                            <th class="text-right">Số tiền</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody><!-- rows injected by JS --></tbody>
                    </table>

                    <div class="empty" id="emptyState" hidden>
                        <i data-lucide="search-x"></i>
                        <p>Chưa có dữ liệu phù hợp — Hãy điều chỉnh bộ lọc.</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Drawer -->
    <aside class="drawer" id="filtersDrawer" aria-label="Bộ lọc">
        <div class="drawer-head">
            <h3>Bộ lọc</h3>
            <button class="icon-btn" id="closeDrawer" aria-label="Đóng bộ lọc"><i data-lucide="x"></i></button>
        </div>
        <div class="drawer-body">
            <div class="form-field">
                <label for="gradeSelectDrawer">Lớp</label>
                <select id="gradeSelectDrawer">
                    <option value="all">Tất cả</option>
                    <option value="9">Lớp 9</option>
                    <option value="10">Lớp 10</option>
                    <option value="11">Lớp 11</option>
                    <option value="12">Lớp 12</option>
                </select>
            </div>
            <div class="form-field">
                <label for="goalSelectDrawer">Mục tiêu thi chứng chỉ</label>
                <select id="goalSelectDrawer">
                    <option value="all">Tất cả</option>
                    <option value="IGCSE">IGCSE</option>
                    <option value="A-Level">A-Level</option>
                    <option value="IB">IB</option>
                    <option value="AP">AP</option>
                    <option value="SAT">SAT</option>
                </select>
            </div>
            <div class="form-field">
                <label for="campusSelectDrawer">Cơ sở</label>
                <select id="campusSelectDrawer">
                    <option value="all">Tất cả</option>
                    <option value="1">Cơ sở 1</option>
                    <option value="2">Cơ sở 2</option>
                </select>
            </div>
            <div class="form-inline">
                <div class="form-field date">
                    <label for="dateFromDrawer">Từ ngày</label>
                    <input id="dateFromDrawer" type="date" />
                </div>
                <div class="form-field date">
                    <label for="dateToDrawer">Đến ngày</label>
                    <input id="dateToDrawer" type="date" />
                </div>
            </div>
        </div>
        <div class="drawer-foot">
            <button class="btn ghost" id="clearBtnDrawer"><i data-lucide="x-circle"></i><span>Xoá lọc</span></button>
            <button class="btn brand" id="applyBtnDrawer"><i data-lucide="filter"></i><span>Áp dụng</span></button>
        </div>
    </aside>

    <!-- Quick Add Modal -->
    <div class="modal" id="quickAddModal" role="dialog" aria-modal="true" aria-labelledby="quickAddTitle" hidden>
        <div class="modal-backdrop" id="quickAddBackdrop" tabindex="-1"></div>
        <div class="modal-panel" role="document">
            <div class="modal-head">
                <h3 id="quickAddTitle">Thêm nhanh</h3>
                <button class="icon-btn" id="quickAddClose" aria-label="Đóng"><i data-lucide="x"></i></button>
            </div>
            <div class="modal-body">
                <div class="tabs" role="tablist" aria-label="Loại đối tượng">
                    <button class="tab active" data-tab="student" role="tab" aria-selected="true">Học viên</button>
                    <button class="tab" data-tab="tutor" role="tab" aria-selected="false">Gia sư</button>
                    <button class="tab" data-tab="contract" role="tab" aria-selected="false">Hợp đồng</button>
                </div>

                <form id="quickAddForm" class="form">
                    <div class="tab-panel" data-panel="student">
                        <div class="form-field">
                            <label>Họ tên</label>
                            <input type="text" placeholder="Nguyễn Văn A" />
                        </div>
                        <div class="form-field">
                            <label>Lớp</label>
                            <select>
                                <option>9</option><option>10</option><option>11</option><option>12</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label>Chương trình</label>
                            <select>
                                <option>IGCSE</option><option>A-Level</option><option>IB</option><option>AP</option><option>SAT</option>
                            </select>
                        </div>
                    </div>

                    <div class="tab-panel" data-panel="tutor" hidden>
                        <div class="form-field">
                            <label>Họ tên gia sư</label>
                            <input type="text" placeholder="Trần Thị B" />
                        </div>
                        <div class="form-field">
                            <label>Môn</label>
                            <input type="text" placeholder="Toán, Lý…" />
                        </div>
                    </div>

                    <div class="tab-panel" data-panel="contract" hidden>
                        <div class="form-field">
                            <label>Mã hợp đồng</label>
                            <input type="text" placeholder="MB-HĐ-2025-001" />
                        </div>
                        <div class="form-field">
                            <label>Học viên</label>
                            <input type="text" placeholder="Nguyễn Văn A" />
                        </div>
                        <div class="form-field">
                            <label>Hạn thanh toán</label>
                            <input type="date" />
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-foot">
                <button class="btn ghost" id="quickAddCancel">Huỷ</button>
                <button class="btn brand" id="quickAddSubmit">Lưu</button>
            </div>
        </div>
    </div>

    <!-- Floating Help -->
    <button class="help-fab" title="Trợ giúp" aria-label="Trợ giúp"><i data-lucide="help-circle"></i></button>
</div>

<!-- ============ JS như bạn đã dán, giữ nguyên ============ -->
<script>
    /* nguyên phần JS của bạn không đổi — (giữ nguyên nội dung) */
    /* ... DÁN NGUYÊN PHẦN SCRIPT BẠN GỬI Ở TRÊN VÀO ĐÂY ... */
</script>
</body>
</html>
