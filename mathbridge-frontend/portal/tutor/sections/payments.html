<section class="content-section" id="payments">
    <div class="section-header">
        <h2>Thanh toán tại trung tâm</h2>
    </div>

    <div class="payment-form-section">
        <div class="form-card">
            <h3>Ghi nhận thanh toán học phí tại trung tâm</h3>
            <form id="paymentForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="invoiceSelect">Chọn hóa đơn chưa thanh toán <span class="required">*</span></label>
                        <div class="custom-select-wrapper" id="invoiceSelectWrapper">
                            <div class="custom-select-trigger" id="invoiceSelectTrigger">
                                <span id="invoiceSelectText">Chọn hóa đơn...</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="custom-select-options" id="invoiceSelectOptions">
                                <div class="custom-select-search">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="invoiceSelectSearch" placeholder="Tìm kiếm theo tên học sinh hoặc lớp học...">
                                </div>
                                <div class="custom-select-list" id="invoiceSelectList">
                                    <!-- Options will be loaded here -->
                                </div>
                            </div>
                            <input type="hidden" id="invoiceSelect" name="invoiceSelect" required>
                        </div>
                    </div>
                </div>

                <div id="studentInfoSection" class="student-info-section" style="display: none;">
                    <h4>Thông tin học sinh</h4>
                    <div class="info-grid">
                        <div class="info-item">
                            <label>Họ tên:</label>
                            <span id="studentName">-</span>
                        </div>
                        <div class="info-item">
                            <label>Email:</label>
                            <span id="studentEmail">-</span>
                        </div>
                        <div class="info-item">
                            <label>Số điện thoại:</label>
                            <span id="studentPhone">-</span>
                        </div>
                        <div class="info-item">
                            <label>Địa chỉ:</label>
                            <span id="studentAddress">-</span>
                        </div>
                        <div class="info-item">
                            <label>Lớp học:</label>
                            <span id="studentClass">-</span>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="paymentMethod">Phương thức thanh toán <span class="required">*</span></label>
                        <select class="form-select" id="paymentMethod" required>
                            <option value="">Chọn phương thức thanh toán...</option>
                        </select>
                    </div>
                    <div id="paymentAmountSection" class="form-group payment-amount-group" style="display: none;">
                        <label class="payment-amount-label">Số tiền cần thanh toán</label>
                        <div class="payment-amount-display">
                            <span id="paymentAmount" class="payment-amount-value">-</span>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="paymentDate">Ngày thanh toán</label>
                        <input type="text" class="form-control" id="paymentDate" readonly>
                    </div>
                    <div class="form-group">
                        <label for="paymentDeadline">Hạn thanh toán</label>
                        <input type="text" class="form-control" id="paymentDeadline" readonly>
                    </div>
                </div>

                <div class="form-group">
                    <label for="notes">Ghi chú</label>
                    <textarea class="form-control" id="notes" rows="3" placeholder="Ghi chú về thanh toán (nếu có)"></textarea>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Xác nhận thanh toán
                    </button>
                    <button type="reset" class="btn btn-secondary" id="resetPaymentForm">
                        <i class="fas fa-undo"></i>
                        Làm mới
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div class="invoice-list-section">
        <div class="section-header">
            <h3>Danh sách hóa đơn</h3>
            <div class="header-actions">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="invoiceListSearch" placeholder="Tìm kiếm theo tên học sinh...">
                </div>
                <button class="btn btn-secondary" id="refreshInvoiceList">
                    <i class="fas fa-sync-alt"></i>
                    Làm mới
                </button>
            </div>
        </div>
        <div class="invoices-table-container">
            <div class="table-header">
                <div class="sortable" data-sort="idHoaDon">
                    Mã HĐ <i class="fas fa-sort"></i>
                </div>
                <div class="sortable" data-sort="studentName">
                    Học sinh <i class="fas fa-sort"></i>
                </div>
                <div class="sortable" data-sort="tenLop">
                    Lớp học <i class="fas fa-sort"></i>
                </div>
                <div class="sortable" data-sort="tongTien">
                    Số tiền <i class="fas fa-sort"></i>
                </div>
                <div class="sortable" data-sort="ngayDangKy">
                    Ngày đăng ký <i class="fas fa-sort"></i>
                </div>
                <div class="sortable" data-sort="ngayThanhToan">
                    Ngày thanh toán <i class="fas fa-sort"></i>
                </div>
                <div class="sortable" data-sort="trangThai">
                    Trạng thái <i class="fas fa-sort"></i>
                </div>
                <div>Hành động</div>
            </div>
            <div id="invoicesTableBody" class="table-body">
                <!-- Invoices will be loaded here -->
            </div>
        </div>
    </div>

    <div id="invoiceDetailsModal" class="modal-overlay" style="display: none;">
        <div class="modal-container invoice-modal">
            <div class="modal-header">
                <h3>Thông tin hóa đơn</h3>
                <button class="modal-close" id="closeInvoiceModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="invoice-card">
                    <div class="invoice-content">
                        <div class="invoice-header">
                            <h4>MATHBRIDGE EDUCATION CENTER</h4>
                            <p>Hóa đơn thanh toán</p>
                        </div>
                        <div class="invoice-body">
                            <div class="invoice-row">
                                <div class="invoice-label">Số biên lai:</div>
                                <div class="invoice-value" id="invoiceReceiptNumber">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Mã hóa đơn:</div>
                                <div class="invoice-value" id="invoiceId">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Họ tên học sinh:</div>
                                <div class="invoice-value" id="invoiceStudentName">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Lớp học:</div>
                                <div class="invoice-value" id="invoiceClass">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Chương trình:</div>
                                <div class="invoice-value" id="invoiceProgram">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Email:</div>
                                <div class="invoice-value" id="invoiceStudentEmail">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Số điện thoại:</div>
                                <div class="invoice-value" id="invoiceStudentPhone">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Địa chỉ:</div>
                                <div class="invoice-value" id="invoiceStudentAddress">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Số tiền:</div>
                                <div class="invoice-value amount-display" id="invoiceAmount">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Phương thức thanh toán:</div>
                                <div class="invoice-value" id="invoicePaymentMethod">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Ngày thanh toán:</div>
                                <div class="invoice-value" id="invoicePaymentDate">-</div>
                            </div>
                            <div class="invoice-row">
                                <div class="invoice-label">Ghi chú:</div>
                                <div class="invoice-value" id="invoiceNotes">-</div>
                            </div>
                        </div>
                        <div class="invoice-footer">
                            <p>Cảm ơn quý khách!</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeInvoiceModalBtn">Đóng</button>
            </div>
        </div>
    </div>
</section>

