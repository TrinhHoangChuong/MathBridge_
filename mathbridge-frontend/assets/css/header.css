/* ================== MathBridge - Header (Glass + Sticky, Optimized) ================== */
/* Token (Bridge 2025) – dùng lại toàn site */
:root{
  --mb-red: #e11d48;
  --mb-red-600:#dc1a45;
  --mb-red-50:#fff1f3;
  --mb-navy:#0f172a;
  --mb-muted:#64748b;

  --mb-border: rgba(15,23,42,.08);
  --mb-border-strong: rgba(15,23,42,.12);

  --mb-radius: 16px;
  --mb-radius-lg: 20px;

  --mb-shadow: 0 8px 24px rgba(2,6,23,.08);
  --mb-shadow-strong: 0 20px 40px rgba(2,6,23,.12);
  --mb-shadow-ambient: 0 12px 28px rgba(2,6,23,.12);
  --mb-shadow-key: 0 20px 40px rgba(2,6,23,.10);
  --mb-shadow-ring: 0 0 0 1px rgba(15,23,42,.06), inset 0 1px 0 rgba(255,255,255,.9);

  --mb-h: 64px; /* header height desktop */
}

/* ================== Header tổng thể ================== */
.mb-header{
  position: sticky; top: 0; z-index: 1000;
  padding: 12px 16px; background: transparent;
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Be Vietnam Pro", sans-serif;
  box-shadow: 0 1px 0 rgba(2,6,23,.06); /* hairline tách nền */
}
/* halo nhẹ để khung điều hướng nổi hơn */
.mb-header::after{
  content:""; position:absolute; left:0; right:0; bottom:-16px; height:32px; pointer-events:none;
  background: radial-gradient(120% 80% at 50% -10%, rgba(225,29,72,.12), rgba(15,23,42,0) 60%);
  filter: blur(12px); opacity:.35;
}

/* Thanh điều hướng “glass pill” */
.mb-header .mb-nav{
  max-width: 1180px; margin: 0 auto; height: var(--mb-h);
  display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 12px;
  padding: 8px 12px; border-radius: var(--mb-radius-lg);
  border: 1px solid var(--mb-border-strong);
  background: rgba(255,255,255,.9);
  box-shadow: var(--mb-shadow-ring), var(--mb-shadow-ambient);
  transition: background-color .25s ease, border-color .25s ease, box-shadow .25s ease, transform .2s ease;
}
.mb-header .mb-nav[data-glass]{ backdrop-filter: saturate(160%) blur(8px); }
.mb-header .mb-nav:hover{ box-shadow: var(--mb-shadow-ring), var(--mb-shadow-ambient), var(--mb-shadow-key); }

/* Khi bám đỉnh (JS thêm .is-stuck) */
.mb-header.is-stuck .mb-nav{
  background:#fff; border-color: rgba(15,23,42,.14);
  box-shadow: 0 0 0 1px rgba(15,23,42,.06), 0 10px 24px rgba(2,6,23,.12), 0 30px 60px -30px rgba(225,29,72,.25);
  transform: translateZ(0);
}

/* ================== Logo & layout ================== */
.mb-logo{
  display:inline-flex; align-items:center; gap:10px; text-decoration:none;
  color:var(--mb-navy); font-weight:700; letter-spacing:.2px;
}
.mb-logo .logo-mark{
  width:28px; height:28px; border-radius:12px;
  background: conic-gradient(from 220deg at 50% 50%, #fff 0deg, #fee2e2 120deg, var(--mb-red) 240deg, #fda4af 360deg);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.04), 0 6px 16px rgba(225,29,72,.18);
}
.mb-logo .logo-text{ font-family:"Be Vietnam Pro","Inter",system-ui,sans-serif; font-size:18px; }

.mb-left{ display:flex; align-items:center; }
.mb-right{ display:flex; align-items:center; gap:10px; justify-content:end; }

/* ================== Button base + Login variant ================== */
.btn{
  --_pad-y: 10px; --_pad-x: 14px;
  display:inline-flex; align-items:center; justify-content:center;
  padding:var(--_pad-y) var(--_pad-x);
  min-height:40px; border-radius:999px; border:1px solid transparent;
  font-weight:600; font-size:14px; text-decoration:none;
  transition: transform .15s ease, box-shadow .15s ease, background-color .2s ease, border-color .2s ease;
  will-change: transform;
}
.btn:active{ transform: translateY(1px); }

/* ✅ CHỌN: Navy solid (tương phản mạnh, chuyên nghiệp) */
.btn--navy{
  background: var(--mb-navy); color:#fff;
  box-shadow: 0 8px 18px rgba(15,23,42,.22);
}
.btn--navy:hover{ filter: brightness(1.06); box-shadow: 0 10px 24px rgba(15,23,42,.28); }

.btn i{ font-size:18px; line-height:1; }
.btn i + span{ margin-left:8px }

/* ================== Link điều hướng trung tâm ================== */
.mb-links{ display:inline-flex; align-items:center; justify-content:center; gap:6px; }
.mb-links > a, .mb-dd-btn{
  appearance:none; background:transparent; border:1px solid transparent;
  color:var(--mb-navy); font-weight:600; font-size:14px; letter-spacing:.2px;
  text-decoration:none; padding:10px 12px; border-radius:12px; line-height:1;
  display:inline-flex; align-items:center; gap:8px; min-height:40px;
  transition: background-color .2s ease, border-color .2s ease, box-shadow .2s ease;
}
.mb-links > a:hover, .mb-dd-btn:hover{
  background:var(--mb-red-50); border-color:rgba(225,29,72,.15); box-shadow:0 4px 12px rgba(225,29,72,.10);
}
.mb-links > a[aria-current="page"]{ background:var(--mb-red-50); border-color:rgba(225,29,72,.25); }

/* Focus ring truy cập */
.mb-links > a:focus-visible, .mb-dd-btn:focus-visible, .mb-burger:focus-visible, .mb-login:focus-visible{
  outline: 3px solid color-mix(in srgb, var(--mb-red) 40%, transparent);
  outline-offset: 2px; border-radius:14px;
}

/* ================== Dropdown (kèm anti-flicker) ================== */
.mb-dd{ position:relative; }
.mb-dd-btn{ cursor:pointer; }
.mb-dd-btn .ph{ transition: transform .15s ease; }

.mb-dd-menu{
  position:absolute; top:calc(100% + 6px); left:0; min-width:260px; padding:8px;
  border-radius:14px; border:1px solid var(--mb-border); background:#fff;
  box-shadow: var(--mb-shadow-strong);
  opacity:0; transform:translateY(-4px); pointer-events:none; visibility:hidden; z-index:1100;
  transition: opacity .25s ease, transform .25s ease, visibility 0s linear .25s; /* delay ẩn để trượt chuột */
}
/* Hiện menu khi hover/focus trong */
.mb-dd:hover .mb-dd-menu, .mb-dd:focus-within .mb-dd-menu{
  opacity:1; transform:translateY(0); pointer-events:auto; visibility:visible;
  transition: opacity .25s ease, transform .25s ease, visibility 0s linear 0s;
}
.mb-dd:where(:hover, :focus-within) .mb-dd-btn .ph{ transform: rotate(180deg); }
/* Vùng buffer vô hình nối nút và menu để không rơi ra giữa đường */
.mb-dd::after{
  content:""; position:absolute; left:0; right:0; top:100%; height:10px; background:transparent;
}

.mb-dd-menu a{
  display:flex; align-items:center; padding:10px 12px; border-radius:10px;
  color:var(--mb-navy); text-decoration:none; font-weight:500; font-size:14px;
}
.mb-dd-menu a:hover{ background:var(--mb-red-50); }

/* ================== Burger & Toggle (mobile) ================== */
.mb-burger{
  display:none; width:40px; height:40px; border-radius:12px;
  align-items:center; justify-content:center; cursor:pointer; user-select:none;
  transition: background-color .2s ease, box-shadow .2s ease;
}
.mb-burger:hover{ background:var(--mb-red-50); box-shadow:0 4px 12px rgba(225,29,72,.10); }
.mb-toggle{ position:absolute; left:-9999px; }

/* ================== Responsive ================== */
@media (max-width:1024px){
  :root{ --mb-h: 56px; }

  .mb-header .mb-nav{ grid-template-columns:auto auto auto; gap:8px; padding:6px 10px; }

  /* Panel menu */
  .mb-links{
    position:fixed; left:12px; right:12px; top:calc(var(--mb-h) + 16px);
    display:grid; gap:4px; padding:8px; max-height:min(70vh,520px); overflow:auto;
    background:#fff; border:1px solid var(--mb-border-strong); border-radius:16px;
    box-shadow: var(--mb-shadow-ring), var(--mb-shadow-strong);
    opacity:0; transform:translateY(-8px); pointer-events:none; visibility:hidden; z-index:1200;
  }
  .mb-toggle:checked ~ .mb-links{ opacity:1; transform:none; pointer-events:auto; visibility:visible; }

  .mb-links > a, .mb-dd-btn{ justify-content:space-between; font-size:15px; padding:12px 14px; }

  /* Dropdown hiển thị nội tuyến trong panel */
  .mb-dd{ position:relative; }
  .mb-dd-menu{
    position:static; border:1px dashed rgba(2,6,23,.08); box-shadow:none; margin:4px 0 6px;
    opacity:1; transform:none; pointer-events:auto; visibility:visible; transition:none;
  }

  /* Hiện burger */
  .mb-burger{ display:inline-flex; }
}

/* ================== Trợ năng & chuyển động ================== */
@media (prefers-reduced-motion: reduce){
  *{ transition:none !important; animation:none !important; }
}

/* ================== Tiện ích nhỏ ================== */
.ph{ font-size:18px; line-height:1; } /* icon phosphor */
/* Navy mềm + nổi hơn */
.btn--navy{
  color:#fff; /* đảm bảo không bị rule khác ghi đè */
  background: linear-gradient(180deg, #182235, #0f172a);
  border-color: rgba(255,255,255,.10);
  box-shadow: 0 8px 18px rgba(15,23,42,.22);
}
.btn--navy:hover{
  background: linear-gradient(180deg, #1c2a42, #111a2e);
  box-shadow: 0 10px 24px rgba(15,23,42,.28);
}
/* === CSS-only pin header: luôn bám đỉnh, không cần JS === */
.mb-header{
  position: fixed;           /* thay cho sticky */
  top: 0; left: 0; right: 0; /* full-width ở đỉnh màn */
  z-index: 1100;
}

/* Tạo khoảng đệm cho nội dung bên dưới, không cần spacer HTML.
   Tự tính theo var(--mb-h) + padding vertical (12px * 2 = 24px).
   Hỗ trợ responsive vì --mb-h đổi trong @media. */
@supports selector(body:has(.mb-header)){
  body:has(.mb-header){
    padding-top: calc(var(--mb-h) + 24px);
  }
}

/* (Tùy chọn) Khi header fixed, làm khối glass nổi rõ hơn một chút */
.mb-header .mb-nav{
  background: rgba(255,255,255,.95);
  border-color: rgba(15,23,42,.14);
  box-shadow:
    var(--mb-shadow-ring),
    0 10px 24px rgba(2,6,23,.12),
    0 30px 60px -30px rgba(225,29,72,.18);
}

/* Mobile vẫn ok vì --mb-h đã giảm trong @media (56px) */
